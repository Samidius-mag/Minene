# Инструкция по сборке плагинов

## Требования

- Java 17 или выше
- Maven 3.6 или выше
- Git (опционально)

## Сборка плагинов

### Важно: Загрузка зависимостей

При первой сборке Maven загрузит все необходимые зависимости из репозиториев. Это может занять **несколько минут** в зависимости от скорости интернета. **Не прерывайте процесс (Ctrl+C)** во время загрузки зависимостей!

После первой успешной сборки зависимости будут кэшированы локально, и последующие сборки будут выполняться быстрее.

### Автоматическая сборка всех плагинов

```bash
# Перейти в корневую директорию проекта
cd Minene

# Собрать все плагины
# ВАЖНО: Дождитесь завершения загрузки зависимостей!
./build-all.sh
```

**Примечание:** Если процесс кажется зависшим во время загрузки зависимостей, это нормально. Maven загружает файлы из интернета, что может занять время.

### Ручная сборка каждого плагина

```bash
# MineneAuth
cd plugins/MineneAuth
mvn clean package
cd ../..

# MineneLobby
cd plugins/MineneLobby
mvn clean package
cd ../..

# MineneProtection
cd plugins/MineneProtection
mvn clean package
cd ../..

# MineneRulers
cd plugins/MineneRulers
mvn clean package
cd ../..

# MineneWorld
cd plugins/MineneWorld
mvn clean package
cd ../..
```

Собранные JAR файлы будут находиться в папках `plugins/[PluginName]/target/`.

## Установка на сервер

1. Скопируйте все собранные JAR файлы в папку `plugins/` вашего Minecraft сервера
2. Запустите сервер один раз для создания конфигурационных файлов
3. Настройте конфигурационные файлы в папках `plugins/[PluginName]/`
4. Перезапустите сервер

## Порядок загрузки плагинов

Плагины имеют следующие зависимости:
- **MineneAuth** - независимый
- **MineneLobby** - зависит от MineneAuth
- **MineneProtection** - независимый
- **MineneRulers** - зависит от MineneProtection
- **MineneWorld** - независимый

Сервер автоматически загрузит плагины в правильном порядке.

## Решение проблем

### Ошибка компиляции

Убедитесь, что:
- Java 17+ установлена: `java -version`
- Maven установлен: `mvn -version`
- Все зависимости загружены: `mvn dependency:resolve`

### Медленная загрузка зависимостей

Если загрузка зависимостей идет очень медленно:
1. Проверьте подключение к интернету
2. Попробуйте использовать зеркало Maven (настройте `~/.m2/settings.xml`)
3. Используйте VPN, если репозитории недоступны из вашего региона
4. Дождитесь завершения - не прерывайте процесс!

### Процесс прерван (Ctrl+C)

Если вы прервали сборку во время загрузки зависимостей:
1. Удалите папку `~/.m2/repository/org/spigotmc/` (если есть)
2. Запустите сборку снова и дождитесь завершения
3. Или используйте `mvn dependency:resolve` для предварительной загрузки зависимостей

### Плагины не загружаются

Проверьте:
- Версия сервера совместима (1.21+)
- Все зависимости установлены
- Логи сервера на наличие ошибок

### База данных не создается

Убедитесь, что:
- Плагин MineneAuth имеет права на запись в папку `plugins/MineneAuth/`
- SQLite драйвер включен в JAR файл

