# Структура проекта Minene

## Обзор

Проект состоит из 5 основных плагинов для Minecraft сервера, работающих вместе для создания игрового мира "Искатели Приключений".

## Плагины

### 1. MineneAuth
**Назначение:** Система авторизации игроков

**Функции:**
- Регистрация новых игроков (`/register`)
- Вход в систему (`/login`)
- Хранение паролей в SQLite базе данных
- Блокировка действий до авторизации
- Таймаут авторизации (60 секунд по умолчанию)

**Зависимости:** Нет

**Файлы:**
- `MineneAuth.java` - основной класс плагина
- `AuthDatabase.java` - интерфейс базы данных
- `SQLiteAuthDatabase.java` - реализация SQLite
- `AuthSession.java` - сессия игрока
- `LoginCommand.java` - команда входа
- `RegisterCommand.java` - команда регистрации

### 2. MineneLobby
**Назначение:** Лобби с порталами в государства

**Функции:**
- Создание лобби размером 100x100 блоков
- Три портала для телепортации в государства
- Автоматическая телепортация после авторизации
- Команда `/lobby` для возврата в лобби

**Зависимости:** MineneAuth

**Файлы:**
- `MineneLobby.java` - основной класс плагина
- `PortalManager.java` - управление порталами
- `LobbyCommand.java` - команда лобби

### 3. MineneProtection
**Назначение:** Защита территорий

**Функции:**
- Защита территории замков (радиус 200 блоков)
- Защита территории лавы между государствами
- Блокировка строительства/разрушения на защищенных территориях
- Команда `/protection info` для проверки территории

**Зависимости:** Нет

**Файлы:**
- `MineneProtection.java` - основной класс плагина
- `ProtectionCommand.java` - команды управления

### 4. MineneRulers
**Назначение:** НПС правители государств

**Функции:**
- Создание НПС правителей в центре каждого государства
- Защита правителей от урона
- Взаимодействие с правителями (правый клик)
- Сообщения при взаимодействии

**Зависимости:** MineneProtection

**Файлы:**
- `MineneRulers.java` - основной класс плагина
- `RulerCommand.java` - команды управления правителями

### 5. MineneWorld
**Назначение:** Генерация мира

**Функции:**
- Автоматическая генерация лавы между государствами
- Генерация замков в центре каждого государства
- Команда `/mineneworld generate` для ручной генерации

**Зависимости:** Нет

**Файлы:**
- `MineneWorld.java` - основной класс плагина
- `WorldCommand.java` - команды управления миром
- `WorldGenerator` - внутренний класс генерации

## Структура директорий

```
Minene/
├── plugins/
│   ├── MineneAuth/
│   │   ├── pom.xml
│   │   └── src/
│   │       ├── main/
│   │       │   ├── java/ru/minene/auth/
│   │       │   └── resources/
│   │       │       ├── plugin.yml
│   │       │       └── config.yml
│   ├── MineneLobby/
│   ├── MineneProtection/
│   ├── MineneRulers/
│   └── MineneWorld/
├── scripts/
│   ├── generate_world.sh
│   └── start_server.sh
├── build-all.sh
├── build-all.bat
├── README.md
├── BUILD.md
└── STRUCTURE.md
```

## Конфигурационные файлы

Каждый плагин имеет свой `config.yml` с настройками:
- **MineneAuth**: настройки базы данных, таймауты, длина паролей
- **MineneLobby**: координаты лобби, порталов, материалы
- **MineneProtection**: координаты государств, размеры защищенных зон
- **MineneRulers**: координаты правителей, сообщения, тип NPC
- **MineneWorld**: параметры генерации лавы и замков

## Порядок загрузки

1. MineneAuth (независимый)
2. MineneProtection (независимый)
3. MineneWorld (независимый)
4. MineneLobby (зависит от MineneAuth)
5. MineneRulers (зависит от MineneProtection)

Сервер автоматически определяет порядок загрузки на основе зависимостей в `plugin.yml`.

## Взаимодействие плагинов

- **MineneAuth → MineneLobby**: После авторизации игрок телепортируется в лобби
- **MineneProtection**: Защищает территории, определенные другими плагинами
- **MineneRulers**: Использует координаты из MineneProtection для размещения правителей
- **MineneWorld**: Генерирует структуры, которые защищаются MineneProtection

